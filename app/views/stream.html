<!-- SEARCH bar row -->
<div class="page-header row">
    <span class="icon-search icon"></span>
    <input
        type="text"
        autocomplete="off"
        data-ng-model="search.origin.title"
        data-ng-init="search.origin.title = ''"
        placeholder="Search for track title"
        class="form-control"/>
    <button class="close" data-ng-show="search.origin.title !== ''" data-ng-click="search.origin.title = ''">&times;</button>
    <div id="new" data-ng-show="filtered">
        <span class="new-count">
            <span class="icon icon-new"></span>
            <span>{{filtered = (stream | filter: {isNew : true}).length}} new</span>
        </span><br>
        <span class="last-visit">last visit: {{user.lastFetch | customDate: 'ago'}}</span>
    </div>
    <div id="settings">
        <button class="btn" ng-click="helpers.toggleReposts()" id="reposts-toggle" ng-class="{'reposts': showReposts}" title="toggle reposts"><span class="icon-repost"></span></button>
        <button class="btn" ng-click="logout()" id="logout" class="" title="logout"><span class="icon-switch"></span></button>
    </div>
</div>

<div class="row" id="error" ng-if="status.error">
    <span class="icon-warning icon"></span>Error reaching SoundCloud service.<br>
    Please check the <a target="_blank" href="http://status.soundcloud.com/">official SoundCloud status blog</a> for more info.
</div>

<div class="loading-overlay" ng-if="status.loading">
    <div class="loading">
        <div class="spinner">
            <div ng-repeat="rect in helpers.getTimes(22) track by $index" class="rect{{$index}}"></div>
            loading...
        </div>
    </div>
</div>

<!-- LIST row -->
<div class="row" id="tiles" ng-show="stream.length > 49"> <!-- should find a way to prevent render problem, ngcloak does not work -->
    <div
        ng-repeat="track in filtered = (stream | filter:search)"
        class="{{track.type}} item row"
        ng-class="{active: helpers.isCurrent([childIndex, parentIndex]), new: track.isNew}"
        ng-show="showReposts || track.type === 'track' || track.type === 'separator' || track.type === 'playlist'"
        ng-click="track.isNew = false"
        ng-include="'views/item.html'"
        ng-init="parentIndex = $index; childIndex = null">
    </div>
</div>
<div class="row">
    <button class="btn" id="more" ng-click="getTracks()" ng-show="stream.length > 49">more</button>
</div>
